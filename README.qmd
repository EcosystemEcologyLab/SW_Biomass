---
title: "AZ Carbon Stores Data Comparison"
format: gfm
editor: visual
---

<!-- README.md is generated from README.qmd. Please edit that file -->

<!-- badges: start -->

[![Project Status: WIP â€“ Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

<!-- badges: end -->

This is a research compendium for work in progress comparing estimates of above-ground biomass in Arizona from different data products.
This is a collaboration between [CCT-Data Science](https://datascience.cct.arizona.edu/) and the [David Moore lab](https://djpmoore.tumblr.com/home) at University of Arizona.

## Reproducibility

### `renv`

This project uses [`renv`](https://rstudio.github.io/renv/articles/renv.html) for package management.
When opening this repo as an RStudio Project for the first time, `renv` should automatically install itself and prompt you to run `renv::restore()` to install all package dependencies.

### `targets`

This project uses the [`targets` package](https://docs.ropensci.org/targets/) for workflow management.
Run `targets::tar_make()` from the console to run the workflow and reproduce all results.
The graph below shows the workflow:

```{r}
#| echo: false
#| message: false
#| warning: false
#| results: asis
cat(
  "```mermaid",
  targets::tar_mermaid(targets_only = TRUE, reporter = "silent"),
  "```",
  sep = "\n"
)
#this should display correctly on GitHub, or code can be pasted into https://mermaid.live
```

## File structure

```{r}
#| echo: true
#| message: false
#| warning: false
fs::dir_tree(recurse = 1)
```

-   `R/` contains functions used in the `targets` pipeline.
-   `_targets` is generated by `targets::tar_make()` and only the metadata of the targets pipeline is on GitHub.
-   `_targets.R` defines a `targets` workflow
-   `data/AGB_cleaned` is where data files for each of the data products should be placed in order to reproduce this workflow. Copy this folder from the "snow" server.
-   `data/shapefiles` contains shapefiles.
-   `docs/` contains output figures and reports that are rendered.
-   `notes/` contains scripts with "sketches" about how to do things
-   `renv` and `renv.lock` are necessary for the `renv` package to work (see above)
-   `_targets_packages.R` is generated by `targets::tar_renv()` and allow `renv` to capture pipeline dependencies
-   `sync_data.R` has some example code for figuring out which raw data files are actually currently used by the pipeline and syncing them to remote servers
